{% with id=widget.attrs.id %}
<select name="{{ widget.name }}"  {% if id %} id="{{ id }}" {% endif %}{% if widget.attrs.class %} class="{{ widget.attrs.class }}" {% endif %}>
{% for group, options, index in widget.optgroups %}
       
        {% for option in options %}
    
    {% with widget=option %}
            <option type="radio" 
                value={{ widget.value }}
             {% for name, value in widget.attrs.items %}
                {% if value is not False %} 
                {{ name }}
                {% if value is not True %}="{{ value|stringformat:'s' }}"
                {% endif %}{% endif %}
             {% endfor %} 
        >{{ widget.label }}</option>
    {% endwith %}
    
    {% endfor %}
    {% endfor %}
</select>
{% endwith %}